<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>SunLight WebView</title>

  <meta name="mobile-web-app-capable" content="yes">
  <meta name="viewport" content="user-scalable=no">

  <link rel="stylesheet" type="text/css" href="/resources/css/uikit.min.css">
  <link rel="stylesheet" type="text/css" href="/resources/css/perfect-scrollbar.css">
  <link rel="stylesheet" type="text/css" href="/resources/css/common.css">
</head>

<style>
  .block {
    width: 48%;
    height: 100%;
    font-size: 14px;
    overflow-y: scroll;
    overflow-wrap: break-word;
    overflow-x: hidden;
    white-space: pre-line;
  }
</style>

<body>
  <div id="outer">
    <div id="inner">
      <div id="header">
        <h1 class="title">Log</h1>
        <a href="/webview.php/admin/index" class="uk-icon-button sl-icon-button"
          uk-icon="icon: arrow-left; ratio: 1.5"></a>
      </div>
      <div id="body">
        <div id="warn" class="block" style="float: left;"></div>
        <div id="error" class="block" style="float: right;"></div>
        <button class="uk-button uk-button-primary uk-border-pill uk-margin-top uk-align-right"
          onclick="update()">Update</button>
      </div>
    </div>
  </div>

  <script type="text/javascript" src="/resources/js/common.js"></script>
  <script type="text/javascript" src="/resources/js/uikit.min.js"></script>
  <script type="text/javascript" src="/resources/js/uikit-icons.min.js"></script>
  <script type="text/javascript" src="/resources/js/jquery.min.js"></script>
  <script type="text/javascript" src="/resources/js/perfect-scrollbar.min.js"></script>

  <script>
    new PerfectScrollbar('#body', { suppressScrollX: true })
    var headers = JSON.parse(escapeJSON('{{{headers}}}'))

    function update() {
      $.when(sendRequest({
        module: "admin",
        action: "log",
        timeStamp: Math.floor(Date.now() / 1000)
      })).done(function (response) {
        $("#warn").html(response.response_data.warn)
        $("#warn").scrollTop($("#warn")[0].scrollHeight)
        $("#error").html(response.response_data.error)
        $("#error").scrollTop($("#error")[0].scrollHeight)
      })
    }
    $(document).ready(function () {
      update()
    })
  </script>
</body>

</html>